<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
:root{
  --bg-start: #071021;   /* deep bluish black */
  --bg-end:   #12061a;   /* purplish black */
  --panel:    #0f1116;   /* slightly lighter panel shade */
  --panel-2:  #151521;   /* overlapping darker panel */
  --muted:    #bfc5cc;   /* light grey text */
  --muted-2:  #98a0a8;   /* softer grey for secondary text */
  --accent:   #5b8cff;   /* blue accent */
  --accent-2: #9a7bff;   /* purple accent */
  --glass:    rgba(255,255,255,0.03);
  --glass-2:  rgba(0,0,0,0.25);
  --radius:   12px;
  --transition: 180ms cubic-bezier(.2,.9,.2,1);
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color:var(--muted);
  background: linear-gradient(180deg, var(--bg-start) 0%, var(--bg-end) 100%);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow:hidden;
}

/* Outer layout */
.container{display:flex;height:100vh;width:100vw;gap:18px;padding:18px}

/* Sidebar */
.sidebar{
  width:78px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
  border-radius:14px;
  padding:18px 10px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  box-shadow: 0 8px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
  transition: width var(--transition), transform var(--transition);
  position:relative;
}

/* expanded state on hover */
.sidebar:hover{ width:240px; transform: translateY(-2px) }

/* header / logo */
.sidebar-header{ width:100%; display:flex; align-items:center; gap:12px; padding:6px 8px }
.logo-container{
  display:flex;align-items:center;gap:12px;width:100%;cursor:pointer;padding:6px;border-radius:10px;
  transition: background var(--transition), box-shadow var(--transition);
  background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
}
.logo-icon{
  width:46px;height:46px;border-radius:10px;overflow:hidden;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  display:flex;align-items:center;justify-content:center;padding:4px;
  box-shadow: 0 6px 18px rgba(26,40,77,0.45);
  flex-shrink:0;
}
.logo-icon img{width:100%;height:100%;object-fit:cover;border-radius:8px}
.logo-text{
  font-size:17px;font-weight:700;color:var(--muted);opacity:0;white-space:nowrap;transition:opacity var(--transition);
  letter-spacing:-0.2px;
}
.sidebar:hover .logo-text{opacity:1}

/* nav */
.nav-items{ display:flex;flex-direction:column;gap:8px;width:100%;margin-top:8px;padding:6px }
.nav-item{
  display:flex;align-items:center;gap:12px;padding:10px;border-radius:10px;color:var(--muted-2);
  text-decoration:none;width:100%;cursor:pointer;transition:background var(--transition), color var(--transition), transform var(--transition);
  background:transparent;
  border: 1px solid transparent;
}
.nav-item .nav-icon{ min-width:28px; display:flex;align-items:center;justify-content:center;font-size:16px;color:var(--muted) }
.nav-text{ font-size:14px;font-weight:600;opacity:0;transition:opacity var(--transition), transform var(--transition) translateY(0) ; color:var(--muted) ; white-space:nowrap}

/* hover/active */
.nav-item:hover{
  background: linear-gradient(90deg, rgba(91,140,255,0.06), rgba(154,123,255,0.04));
  color:var(--muted);
  transform: translateY(-2px);
  border-color: rgba(255,255,255,0.02);
  box-shadow: 0 6px 18px rgba(8,12,25,0.6);
}
.sidebar:hover .nav-text{ opacity:1 }
.nav-item.active{
  background: linear-gradient(90deg, rgba(91,140,255,0.09), rgba(154,123,255,0.06));
  border: 1px solid rgba(91,140,255,0.12);
  color:#ffffff;
  box-shadow: 0 10px 30px rgba(20,30,60,0.5);
}

/* footer */
.sidebar-footer{ margin-top:auto;padding:12px;width:100%;border-top:1px solid rgba(255,255,255,0.02);display:flex;align-items:center}
.footer-content{display:flex;align-items:center;gap:8px}
.footer-text{font-size:12px;color:var(--muted-2);opacity:0;transition:opacity var(--transition)}
.sidebar:hover .footer-text{opacity:1}
.footer-icon{font-size:14px;color:var(--muted)}

/* main content */
.main-content{
  flex:1; height:calc(100vh - 36px); border-radius:14px; overflow:hidden; position:relative;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04));
  box-shadow: 0 18px 60px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
}

/* iframe frame */
.content-frame{
  width:100%;height:100%;border:0;background:transparent;display:block;
  backdrop-filter: blur(6px);
}

/* settings panel (overlay panel look) */
.settings-panel{
  position:absolute;inset:18px; border-radius:12px;padding:28px; overflow:auto; display:none;
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 14px 40px rgba(2,6,23,0.6);
}
.settings-panel.active{ display:block }

/* section cards */
.setting-section{
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.04));
  border-radius:12px;padding:20px;margin-bottom:16px;border:1px solid rgba(255,255,255,0.02);
  box-shadow: 0 8px 22px rgba(2,6,23,0.5);
}
.settings-title{ font-size:26px;color:var(--muted);font-weight:800;margin-bottom:6px }
.settings-subtitle{ color:var(--muted-2); margin-bottom:14px }

/* presets grid */
.cloak-presets{ display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px }
.preset-item{
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));
  border-radius:10px;padding:14px;text-align:center;cursor:pointer;border:1px solid rgba(255,255,255,0.02);
  transition:transform var(--transition), box-shadow var(--transition), border-color var(--transition);
}
.preset-item:hover{ transform:translateY(-6px); border-color: rgba(91,140,255,0.12); box-shadow: 0 10px 30px rgba(20,30,60,0.45) }
.preset-item.selected{ border-color: rgba(154,123,255,0.14); background:linear-gradient(180deg, rgba(91,140,255,0.04), rgba(154,123,255,0.03)) }
.preset-icon{ font-size:28px;margin-bottom:8px }
.preset-name{ color:var(--muted); font-weight:700; font-size:13px }

/* inputs/buttons */
.input-field{
  width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);
  background:linear-gradient(180deg, rgba(0,0,0,0.03), rgba(255,255,255,0.01));
  color:var(--muted); font-size:14px;
}
.input-field:focus{ outline:none; box-shadow:0 6px 24px rgba(20,30,60,0.45); border-color: rgba(91,140,255,0.18) }

.apply-button{
  padding:10px 18px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:#051224;font-weight:700;cursor:pointer;box-shadow:0 8px 30px rgba(91,140,255,0.14);
}
.apply-button:hover{ transform:translateY(-3px) }

/* loading screen */
.loading-screen{
  position:absolute;inset:0;display:flex;align-items:center;justify-content:center;gap:12px;
  background: linear-gradient(180deg, rgba(2,4,9,0.6), rgba(2,4,9,0.65));
  z-index:40;opacity:0;pointer-events:none;transition:opacity var(--transition);
}
.loading-screen.active{ opacity:1; pointer-events:all }
.spinner{
  width:36px;height:36px;border-radius:50%;border:3px solid rgba(255,255,255,0.04);border-top-color:var(--accent);
  animation: spin 0.8s linear infinite;
}

/* modal overlay */
.blocked-overlay{ position:fixed;inset:0;background:linear-gradient(0deg, rgba(0,0,0,0.6), rgba(0,0,0,0.6));display:none;align-items:center;justify-content:center;z-index:60 }
.blocked-overlay.active{ display:flex }
.blocked-modal{
  width:clamp(300px,40vw,620px);border-radius:14px;padding:22px;background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid rgba(255,255,255,0.03);box-shadow:0 20px 50px rgba(2,6,23,0.7)
}
.blocked-title{ color:var(--muted); font-weight:800; font-size:18px }
.blocked-body{ color:var(--muted-2); margin:10px 0 18px }

/* responsive */
@media (max-width:900px){
  .container{flex-direction:column;padding:12px}
  .sidebar{width:100%;height:auto;border-radius:12px;display:flex;flex-direction:row;align-items:center;padding:10px;overflow:auto}
  .sidebar:hover{width:100%}
  .sidebar .logo-text,.nav-text,.footer-text{ display:none }
  .main-content{height:calc(100vh - 120px)}
}

/* small accessibility/neatness niceties */
a.nav-item{ color:inherit }
button{ font-family: inherit }
@media (max-width: 900px) {
  body {
    overflow: hidden;
  }

  /* Hide your whole layout */
  .sidebar,
  .content,
  header,
  main,
  nav {
    display: none !important;
  }

  /* Show the warning screen */
  .screen-too-small {
    display: flex !important;
  }
}

/* Default hidden */
.screen-too-small {
  display: none;
  position: fixed;
  inset: 0;
  background: #0a0a0f;
  color: #ddd;
  font-family: "Inter", sans-serif;
  font-size: 1.2rem;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 20px;

  /* Slight gradient to match your blue-black ‚Üí purple-black theme */
  background: linear-gradient(135deg, #0a0a14, #0d0024);
}
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-icon">
                        <img src="https://ubgcosmos.github.io/logo.png" alt="Cosmos Logo">
                    </div>
                    <div class="logo-text">Cosmos</div>
                </div>
            </div>

            <div class="nav-items">
                <a class="nav-item active" data-page="iframe" data-url="https://ubgcosmos.github.io/home.html">
                    <span class="nav-icon"><i class="fas fa-home"></i></span>
                    <span class="nav-text">Home</span>
                </a>
                <a class="nav-item" data-page="iframe" data-url="https://ubgcosmos.github.io/docs">
                    <span class="nav-icon"><i class="fas fa-gamepad"></i></span>
                    <span class="nav-text">Games</span>
                </a>
                <a class="nav-item" data-page="iframe" data-url="https://ubgcosmos.github.io/stats">
                    <span class="nav-icon"><i class="fas fa-ghost"></i></span>
                    <span class="nav-text">Gameboy</span>
                </a>
                <a class="nav-item" data-page="iframe" data-url="https://ubgcosmos.github.io/downloads">
                    <span class="nav-icon"><i class="fas fa-download"></i></span>
                    <span class="nav-text">Downloads</span>
                </a>
                <a class="nav-item" data-page="iframe" data-url="https://ubgcosmos.github.io/ai">
                    <span class="nav-icon"><i class="fas fa-brain"></i></span>
                    <span class="nav-text">AI</span>
                </a>
                <a class="nav-item" data-page="iframe" data-url="https://ubgcosmos.github.io/credits">
                    <span class="nav-icon"><i class="fas fa-heart"></i></span>
                    <span class="nav-text">Credits</span>
                </a>
                <a class="nav-item" data-page="iframe" data-url="https://ubgcosmos.github.io/feedback.html">
                    <span class="nav-icon"><i class="fas fa-comment"></i></span>
                    <span class="nav-text">Feedback</span>
                </a>
                <a class="nav-item" data-page="settings">
                    <span class="nav-icon"><i class="fas fa-cog"></i></span>
                    <span class="nav-text">Settings</span>
                </a>
            </div>

            <div class="sidebar-footer">
                <div class="footer-content">
                    <span class="footer-icon"><i class="fas fa-sparkles"></i></span>
                    <span class="footer-text">by Ethan Tang</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="loading-screen">
                <div class="spinner"></div>
            </div>
            <iframe id="contentFrame" class="content-frame" src="https://ubgcosmos.github.io"></iframe>
            
            <!-- Settings Panel -->
            <div class="settings-panel" id="settingsPanel">
                <div class="settings-header">
                    <h1 class="settings-title">Settings</h1>
                    <p class="settings-subtitle">Customize your Cosmos experience</p>
                </div>

                <!-- Tab Cloaking -->
                <div class="setting-section">
                    <div class="setting-header">Tab Cloaking</div>
                    <div class="setting-description">Change your tab's title and icon to stay incognito</div>
                    
                    <div class="cloak-presets">
                        <div class="preset-item" data-title="Google" data-icon="https://www.google.com/favicon.ico">
                            <div class="preset-icon">üîç</div>
                            <div class="preset-name">Google</div>
                        </div>
                        <div class="preset-item" data-title="Google Drive" data-icon="https://ssl.gstatic.com/docs/doclist/images/drive_2022q3_32dp.png">
                            <div class="preset-icon">üìÅ</div>
                            <div class="preset-name">Google Drive</div>
                        </div>
                        <div class="preset-item" data-title="Google Classroom" data-icon="https://ssl.gstatic.com/classroom/favicon.png">
                            <div class="preset-icon">üéì</div>
                            <div class="preset-name">Classroom</div>
                        </div>
                        <div class="preset-item" data-title="Gmail" data-icon="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico">
                            <div class="preset-icon">‚úâÔ∏è</div>
                            <div class="preset-name">Gmail</div>
                        </div>
                        <div class="preset-item" data-title="YouTube" data-icon="https://www.youtube.com/favicon.ico">
                            <div class="preset-icon">‚ñ∂Ô∏è</div>
                            <div class="preset-name">YouTube</div>
                        </div>
                        <div class="preset-item" data-title="Wikipedia" data-icon="https://www.wikipedia.org/static/favicon/wikipedia.ico">
                            <div class="preset-icon">üìö</div>
                            <div class="preset-name">Wikipedia</div>
                        </div>
                    </div>

                    <div class="custom-cloak">
                        <div class="input-group">
                            <label class="input-label">Custom Tab Title</label>
                            <input type="text" class="input-field" id="customTitle" placeholder="My Custom Title">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Custom Favicon URL</label>
                            <input type="text" class="input-field" id="customIcon" placeholder="https://example.com/favicon.ico">
                        </div>
                        <button class="apply-button" id="applyCustomCloak">Apply Custom Cloak</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Blocked Link Modal -->
    <div class="blocked-overlay" id="blockedOverlay">
        <div class="blocked-modal">
            <div class="blocked-header">
                <div class="blocked-icon">
                    <i class="fas fa-ban"></i>
                </div>
                <div class="blocked-title">Access Denied</div>
            </div>
            <div class="blocked-body">
                This site only allows navigation within ubgcosmos.github.io. External links are blocked for your safety.
            </div>
            <div class="blocked-buttons">
                <button class="blocked-button" id="blockedOk">Got it</button>
            </div>
        </div>
    </div>
    
    <div class="screen-too-small">
      This screen is too small to properly display the site.<br>
      Please rotate your device or use a larger screen.
    </div>
    
    <script>
        const navItems = document.querySelectorAll('.nav-item');
        const contentFrame = document.getElementById('contentFrame');
        const loadingScreen = document.querySelector('.loading-screen');
        const settingsPanel = document.getElementById('settingsPanel');
        const blockedOverlay = document.getElementById('blockedOverlay');
        const blockedOk = document.getElementById('blockedOk');
        const presetItems = document.querySelectorAll('.preset-item');
        const customTitle = document.getElementById('customTitle');
        const customIcon = document.getElementById('customIcon');
        const applyCustomCloak = document.getElementById('applyCustomCloak');

        const ALLOWED_DOMAIN = 'ubgcosmos.github.io';
        
        // Load saved cloak
        const savedCloak = JSON.parse(localStorage.getItem('cosmos-cloak') || '{}');
        if (savedCloak.title && savedCloak.icon) {
            applyCloak(savedCloak.title, savedCloak.icon);
        }

        function getDomain(url) {
            try {
                const urlObj = new URL(url);
                return urlObj.hostname;
            } catch (e) {
                return '';
            }
        }

        function isAllowedDomain(url) {
            const domain = getDomain(url);
            return domain === ALLOWED_DOMAIN;
        }

        function monitorIframe() {
            try {
                const iframeUrl = contentFrame.contentWindow.location.href;
                
                if (!isAllowedDomain(iframeUrl)) {
                    contentFrame.contentWindow.stop();
                    blockedOverlay.classList.add('active');
                    contentFrame.contentWindow.history.back();
                }
            } catch (e) {
                // Cross-origin - expected
            }
        }

        function applyCloak(title, iconUrl) {
            document.title = title;
            
            let link = document.querySelector("link[rel*='icon']");
            if (!link) {
                link = document.createElement('link');
                link.rel = 'icon';
                document.head.appendChild(link);
            }
            link.href = iconUrl;

            localStorage.setItem('cosmos-cloak', JSON.stringify({ title, icon: iconUrl }));
        }

        // Navigation
        navItems.forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                
                const page = item.getAttribute('data-page');
                const url = item.getAttribute('data-url');
                
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
                
                if (page === 'settings') {
                    contentFrame.style.display = 'none';
                    settingsPanel.classList.add('active');
                } else {
                    settingsPanel.classList.remove('active');
                    contentFrame.style.display = 'block';
                    loadingScreen.classList.add('active');
                    contentFrame.src = url;
                }
            });
        });

        contentFrame.addEventListener('load', () => {
            loadingScreen.classList.remove('active');
            monitorIframe();
        });

        // Preset cloaks
        presetItems.forEach(preset => {
            preset.addEventListener('click', () => {
                const title = preset.getAttribute('data-title');
                const icon = preset.getAttribute('data-icon');
                
                presetItems.forEach(p => p.classList.remove('selected'));
                preset.classList.add('selected');
                
                applyCloak(title, icon);
            });
        });

        // Custom cloak
        applyCustomCloak.addEventListener('click', () => {
            const title = customTitle.value.trim();
            const icon = customIcon.value.trim();
            
            if (title && icon) {
                applyCloak(title, icon);
                presetItems.forEach(p => p.classList.remove('selected'));
                customTitle.value = '';
                customIcon.value = '';
            }
        });

        // Blocked modal
        blockedOk.addEventListener('click', () => {
            blockedOverlay.classList.remove('active');
        });

        blockedOverlay.addEventListener('click', (e) => {
            if (e.target === blockedOverlay) {
                blockedOverlay.classList.remove('active');
            }
        });

        setInterval(monitorIframe, 1000);

        window.addEventListener('load', () => {
            setTimeout(() => {
                loadingScreen.classList.remove('active');
            }, 500);
        });
    </script>
</body>
</html>
